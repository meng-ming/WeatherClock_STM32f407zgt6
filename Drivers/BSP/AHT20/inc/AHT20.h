/**
 * @file    AHT20.h
 * @brief   AHT20 温湿度传感器驱动接口
 * @note    对外仅暴露核心业务接口，隐藏底层 I2C 实现细节，实现高内聚低耦合。
 * @author  meng-ming
 * @version 1.1
 * @date    2025-12-10
 */

#ifndef __AHT20_H
#define __AHT20_H

/* ==================================================================
 * 头文件包含
 * ================================================================== */
#include <stdint.h>

/* ==================================================================
 * 状态码定义 (规范化返回值)
 * ================================================================== */
#define AHT20_OK 0
#define AHT20_ERROR 1

/* ==================================================================
 * 核心业务接口 (API)
 * ================================================================== */

/**
 * @brief  初始化 AHT20 传感器
 * @note   包含 GPIO 初始化、I2C 总线复位、传感器上电校准检查
 * @retval AHT20_OK: 初始化成功, AHT20_ERROR: 失败 (需检查接线)
 */
uint8_t AHT20_Init(void);

/**
 * @brief  读取温湿度数据 (阻塞式)
 * @note   内部包含“触发测量 -> 等待 80ms -> 读取数据 -> 公式转换”的全流程
 * @param  temp: 输出参数，温度值 (摄氏度)
 * @param  humi: 输出参数，湿度值 (%)
 * @retval AHT20_OK: 读取成功, AHT20_ERROR: 读取失败 (传感器忙或通信错误)
 */
uint8_t AHT20_Read_Data(float* temp, float* humi);

#endif /* __AHT20_H */